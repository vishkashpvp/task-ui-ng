<div class="container mt-3">
  <mat-card>
    <mat-card-title>MY PROFILE</mat-card-title>

    <!-- <mat-card-content class="mt-3">
      <div *ngFor="let x of currentUser | keyvalue">
        <mat-divider></mat-divider>
        <mat-card-subtitle class="mt-3">{{ x.key }}</mat-card-subtitle>
        <p>{{ x.value }}</p>
      </div>
    </mat-card-content> -->

    <form
      class="mt-3"
      [formGroup]="profileForm"
      (ngSubmit)="updateProfile(profileForm)"
    >
      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>User Name</mat-label>
          <input
            formControlName="name"
            placeholder="Enter user name"
            matInput
          />
          <mat-error> username error </mat-error>
        </mat-form-field>
      </div>

      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <input
            formControlName="password"
            [type]="toggleEye ? 'password' : 'text'"
            placeholder="Enter password"
            matInput
          />
          <mat-icon matSuffix (click)="toggleEye = !toggleEye">{{
            toggleEye ? "visibility_off" : "visibility"
          }}</mat-icon>
          <mat-error> password error </mat-error>
        </mat-form-field>
      </div>

      <mat-divider></mat-divider>

      <div class="form-group mt-3">
        <mat-form-field appearance="outline">
          <mat-label>User Mail</mat-label>
          <input [value]="currentUser.mail" matInput readonly />
        </mat-form-field>
      </div>

      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>Created At</mat-label>
          <input [value]="currentUser.createdAt" matInput readonly />
        </mat-form-field>
      </div>

      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>Updated At</mat-label>
          <input [value]="currentUser.updatedAt" matInput readonly />
        </mat-form-field>
      </div>

      <div class="form-group">
        <button *ngIf="!updateLoading" class="btn btn-primary" type="submit">
          UPDATE
        </button>

        <mat-spinner *ngIf="updateLoading" [diameter]="25"></mat-spinner>
      </div>
    </form>
  </mat-card>
</div>
